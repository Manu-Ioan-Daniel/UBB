
### Definitie

**Varianta** (dispersia) unei variabile aleatoare $X$ (discrete sau continue) este
$$
V(X) = \displaystyle E\left[(X - E(X))^2\right],
$$
(daca valoarea medie $E[(X - E(X))^2]$ exista). Valoarea $\sqrt{V(X)}$ se numeste **deviatia standard** a lui $X$ si o notam cu $\text{Std}(X)$.
* Varianta unei variabile aleatoare caracterizeaza **împrastierea (dispersia)** valorilor lui $X$ în jurul valorii medii $E(X)$. 

### Proprietati ale Variantei (pentru v.a. discrete sau continue):

* $V(X) = E(X^2) - E^2(X)$.
$$
E((X-E(X))^{2}) = E(X^{2}-2XE(X)+E^{2}(X)) = E(X^{2})-2E(XE(X))+E(E^{2}(X))
$$
$$
=E(X^{2})-2E^{2}(X) + E^{2}(X) = E(X^{2})-E^{2}(X)
$$
* $V(aX + b) = a^2 V(X) \quad \forall a, b \in \mathbb{R}$.
* Daca $X$ si $Y$ sunt variabile aleatoare independente, atunci
$$
V(X + Y) = \displaystyle V(X) + V(Y).
$$

### Python: Estimarea E(X), V(X), Std(X)

Python: `numpy.mean`, `numpy.var`, `numpy.std`

Fie $x = [x_0, \dots, x_{n-1}]$ valori aleatoare ale unei v.a. $X$

* $E(X) \approx \text{numpy.mean}(x) = \displaystyle \frac{1}{n}(x_0 + \ldots + x_{n-1})$ pentru $n$ suficient de mare.
* $V(X) \approx \text{numpy.var}(x) = \displaystyle \frac{1}{n} \sum_{i=0}^{n-1} (x_i - \text{numpy.mean}(x))^2$ pentru $n$ suficient de mare.
* $\text{Std}(X) \approx \text{numpy.std}(x) = \displaystyle \left( \frac{1}{n} \sum_{i=0}^{n-1} (x_i - \text{numpy.mean}(x))^2 \right)^{\frac{1}{2}}$ pentru $n$ suficient de mare.

### Observatie: 
Daca $Z$ este o v.a. (cu $V(Z) > 0$) atunci v.a. $\tilde{Z} := \displaystyle \frac{Z - E(Z)}{\text{Std}(Z)}$ este **versiunea standardizata** a v.a. $Z$, iar $E(\tilde{Z}) = 0$ si $V(\tilde{Z}) = 1$.

---

## Recapitulare: Variabila Aleatoare Discreta vs. Continua (Tabel)

| Caracteristica                   | V.a. Discreta                                               | V.a. Continua                                      |
| :------------------------------- | :---------------------------------------------------------- | :------------------------------------------------- |
| **Caracterizata de**             | Distributia de probabilitate discreta                       | Functia de densitate $f$                           |
| **Probabilitatea totala**        | $\displaystyle \sum_{i \in I} P(X = x_i) = 1$               | $\displaystyle \int_{-\infty}^{\infty} f(t)dt = 1$ |
| **Calculul $P(X \in A)$**        | $\displaystyle \sum_{i \in I: x_i \in A} P(X = x_i)$        | $\displaystyle \int_{A} f(t)dt$                    |
| **Functia de Repartitie $F(x)$** | $F(x) = \displaystyle \sum_{i \in I: x_i \le x} P(X = x_i)$ | $F(x) = \displaystyle \int_{-\infty}^{x} f(t)dt$   |
| **Proprietati $F(x)$**           | Continua la dreapta, Discontinua in $x_i$                   | Continua in orice punct $x \in \mathbb{R}$         |
| **$P(X=a)$**                     | $P(X = a) \ge 0$ daca $a \in \{x_i\}$                       | $P(X = a) = 0 \quad \forall a \in \mathbb{R}$      |
| **$P(a \le X \le b)$**           | $\displaystyle \sum_{i \in I: a \le x_i \le b} P(X = x_i)$  | $\displaystyle \int_{a}^{b} f(t) dt$               |
| **Relatie $F'(x) \to f(x)$**     | Nu se aplica direct (scari)                                 | Daca $F$ este derivabila, $F'(x) = f(x)$           |
| **Valoarea Medie $E(X)$**        | $\displaystyle \sum_{i \in I} x_i P(X = x_i)$               | $\displaystyle \int_{-\infty}^{\infty} tf(t) dt$   |
## Exemple: 
1) Fie $X \sim \text{Bino}(n, p)$. Sa se arate ca $E(X) = np$ si $V(X) = np(1 - p)$.
$$
E(X)=\sum_{i=0}^{n} i\cdot P(X=x_{i}) = \sum_{i=1}^{n} i \cdot C_{n}^{i} \cdot p^{i}\cdot (1-p)^{n-i} = n\cdot \sum_{i=1}^{n} C_{n-1}^{i-1}\cdot p^{i}\cdot (1-p)^{n-i} ,\text{ substitutie j=i-1}
$$
$$
E(X) = n \cdot \sum_{j=0}^{n-1}p^{j+1}\cdot (1-p)^{(n-1)-j} = np\cdot \sum_{j=0}^{n-1} P(Y=j) = np,\text{ unde Y} \sim Bino(n-1,p)  
$$

$$
\text{Metoda 2:fie }X_{i} \sim Bernouli(p),\quad i \in \{1,2,\dots n\},\quad P(X_{i}=1)=p,P(X_{i}=0)=1-p
$$
$$
E(X)=E\left( \sum_{i=1}^{n} X_{i} \right) = \sum_{i=1}^{n} E(X_{i}) = np
$$
$$
V(X_{i})=E(X_{i}^{2})-E^{2}(X_{i}) = p-p^{2}=p(1-p)
$$
$$
sau
$$
$$
X-E(X) \sim \begin{pmatrix}
1-p & -p \\
p & 1-p
\end{pmatrix} \implies (X-E(X))^{2} \sim \begin{pmatrix}
(1-p)^{2} & p^{2} \\
p & 1-p
\end{pmatrix},\quad V(X_{i})=E([X-E(X)]^{2})
$$
$$
V(X)=V(X_{1}+X_{2}+\dots X_{n}) = V(X_{1})+V(X_{2})+\dots V(X_{n}) = np(1-p)
$$

2) Distributia Normala $X \sim N(\mu, \sigma^2)$ Daca $X \sim N(\mu, \sigma^2)$, sa se arate ca $E(X) = \mu$ si $V(X) = \sigma^2$.

$$
E(X)=\int_{-\infty}^{\infty} tf(t) \, dt=\int_{-\infty}^{\infty} \frac{t}{\sigma \sqrt{2\pi}}\exp\left(-{\frac{(t-\mu)^{2}}{2\sigma^{2}}}\right) \, dt 
$$
$$
x=\frac{t-\mu}{\sigma} \implies dx=\frac{dt}{\sigma},t=\sigma x+\mu
$$
$$
E(X)=\frac{1}{\sqrt{ 2\pi }}\int_{-\infty}^{\infty} (\sigma x+\mu)\exp\left( -\frac{x^{2}}{2} \right) \, dx  = \frac{\sigma}{\sqrt{ 2\pi }} \int_{-\infty}^{\infty} x\exp\left( -\frac{x^{2}}{2} \right)  \, dx \ + \mu = \mu 
$$
$$
V(X)=E([X-\mu]^{2})=\frac{1}{\sqrt{ 2\pi }\sigma}\int_{-\infty}^{\infty} (x-\mu)^{2}\exp\left( -\frac{(x-\mu)^{2}}{2\sigma^{2}} \right) \, dx  = \frac{\sigma^{2}}{\sqrt{ 2\pi }} \int_{-\infty}^{\infty} t^{2}\exp\left( -\frac{t^{2}}{2} \right) \, dt
$$
$$
= \frac{\sigma^{2}}{\sqrt{ 2\pi }} \left( t\exp\left(-\frac{t^{2}}{2}\right)\Big |_{-\infty}^{\infty} + \int_{-\infty}^{\infty} \exp\left(-\frac{t^{2}}{2}\right)  \, dx  \right ) = \sigma^{2}
$$

3) Standardizarea Variabilei Aleatoare Normale

Să se arate că: $X \sim N(\mu, \sigma^2) \iff \displaystyle \frac{X - \mu}{\sigma} \sim N(0, 1)$.
    $$
    f_{N(\mu, \sigma^2)}(x) = \displaystyle \frac{1}{\sqrt{2\pi}\sigma} \exp \left( -\frac{(x - \mu)^2}{2\sigma^2} \right), \quad x \in \mathbb{R}.
    $$
    $$
    f_{N(0, 1)}(y) = \displaystyle \frac{1}{\sqrt{2\pi}} \exp \left( -\frac{y^2}{2} \right), \quad y \in \mathbb{R}.
    $$

Notam cu $Y = \displaystyle \frac{X - \mu}{\sigma}$.

### Demonstratia Directa ("$\Rightarrow$"): $X \sim N(\mu, \sigma^2) \implies Y \sim N(0, 1)$
$$
F_Y(y) = P(Y \le y) = P\left(\frac{X - \mu}{\sigma} \le y\right) = P(X \le \sigma y + \mu) = F_X(\sigma y + \mu).
$$
$$
f_Y(y) = F'_Y(y) = F'_X(\sigma y + \mu) \cdot \sigma = f_X(\sigma y + \mu) \cdot \sigma = \frac{1}{\sqrt{2\pi}} \exp \left( -\frac{y^2}{2} \right),
$$

care este functia de densitate pentru $N(0, 1)$. Deci $Y \sim N(0, 1)$.

### Demonstratia Inversa ("$\Leftarrow$"): $Y \sim N(0, 1) \implies X \sim N(\mu, \sigma^2)$

$$
F_X(x) = P(X \le x) = P\left(\sigma Y + \mu \le x\right) = P\left(Y \le \frac{x - \mu}{\sigma}\right) = F_Y\left(\frac{x - \mu}{\sigma}\right).
$$
$$
f_X(x) = F'_X(x) = F'_Y\left(\frac{x - \mu}{\sigma}\right) \cdot \frac{d}{dx} \left(\frac{x - \mu}{\sigma}\right) = f_Y\left(\frac{x - \mu}{\sigma}\right) \cdot \frac{1}{\sigma}
$$
$$
f_X(x) = \displaystyle \frac{1}{\sqrt{2\pi}\sigma} \exp \left( -\frac{(x - \mu)^2}{2\sigma^2} \right)
$$
care este functia de densitate pentru $N(\mu, \sigma^2)$. Deci $X \sim N(\mu, \sigma^2)$.

